<%# Favorite Button Partial %>
<%# Supports two contexts: :card (recipe index cards) and :show (recipe show page header) %>
<%# Usage: render "recipes/favorite_button", recipe: @recipe, context: :show %>

<% context ||= :card %>

<% if context == :show %>
  <%# Show page context - simple button in header bar %>
  <div id="recipe_<%= recipe.id %>_favorite">
    <%= button_to toggle_favorite_recipe_path(recipe), method: :patch, class: "p-2 rounded-md text-text-secondary dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer" do %>
      <%= lucide_icon "heart", class: "size-5 #{recipe.favorite? ? 'fill-red-500 text-red-500' : ''}" %>
    <% end %>
  </div>
<% else %>
  <%# Card context - overlay button with backdrop blur %>
  <div id="recipe_<%= recipe.id %>_favorite" class="absolute top-2 right-2 flex gap-1 z-10 md:opacity-0 md:group-hover:opacity-100 transition-opacity md:translate-y-[-4px] md:group-hover:translate-y-0 duration-200" onclick="event.stopPropagation();">
    <%= button_to toggle_favorite_recipe_path(recipe), method: :patch, form_class: "inline-block", class: "p-1.5 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-md shadow-sm hover:bg-white dark:hover:bg-gray-800 text-text-secondary dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 border border-gray-100 dark:border-gray-700 cursor-pointer" do %>
      <%= lucide_icon "heart", class: "size-3.5 #{recipe.favorite? ? 'fill-red-500 text-red-500' : ''}" %>
    <% end %>
  </div>
<% end %>
